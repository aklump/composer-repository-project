# @file
# Build the bootstrap files, pulling from the framework.

! [ -e vendor/ ] && echo "You must run \`composer install\` first" && exit 1

# Copy the shell bootstrap from framework.
cp vendor/aklump/composer-repository-framework/install/_bootstrap.sh inc/_bootstrap.sh
source inc/_bootstrap.sh || exit 1

# Generate the PHP bootstrap from framework and shell.
sed "
s,<?php,<?php\n/** Autogenerated by \`bump build\`; do not edit this file. **/,g
s,__ROOT,$ROOT,g
s,__FRAMEWORK_DIR,$FRAMEWORK_DIR,g
s,'$ROOT,ROOT . ',g
s,ROOT . '',ROOT,g
" $FRAMEWORK_DIR/install/_bootstrap.php > ./inc/_bootstrap.php

